---
import { SITE_TITLE } from "../../consts";
import HeaderLink from "./HeaderLink.astro";
import ThemeToggle from "../ui/button/ThemeToggle.astro";
---

<header class="bg-background text-foreground border-b sw-header">
    <nav class="mx-auto max-w-6xl px-4 py-2 flex items-center justify-between">
        <div class="flex items-center gap-3">
            <a
                class="no-underline hover:opacity-90 flex items-center gap-2"
                href="/"
                aria-label="Home"
            >
                <img
                    src="/favicon.png?v=1"
                    alt=""
                    aria-hidden="true"
                    width="45"
                    height="45"
                />
            </a>
            <div class="internal-links hidden md:flex items-center gap-2 ml-1">
                <HeaderLink
                    href="/"
                    class="px-2 py-3 text-[color:var(--color-text-secondary)] no-underline"
                    >Home</HeaderLink
                >
                <HeaderLink
                    href="/projects"
                    class="px-2 py-3 text-[color:var(--color-text-secondary)] no-underline"
                    >Projects</HeaderLink
                >
                <HeaderLink
                    href="/about"
                    class="px-2 py-3 text-[color:var(--color-text-secondary)] no-underline"
                    >About</HeaderLink
                >
                <HeaderLink
                    href="/blog"
                    class="px-2 py-3 text-[color:var(--color-text-secondary)] no-underline"
                    >Blog</HeaderLink
                >
                <a
                    href="#contact"
                    class="px-2 py-3 text-[color:var(--color-text-secondary)] no-underline"
                    >Contact</a
                >
            </div>
        </div>
        <div class="flex items-center gap-3">
            <div class="social-links hidden md:flex items-center gap-3">
                <a
                    href="https://www.linkedin.com/in/davidingrammkt/"
                    target="_blank"
                    class="group text-[color:var(--color-text-secondary)]"
                >
                    <span class="sr-only">Follow on LinkedIn</span>
                    <!-- Linkedin icon -->
                    <svg
                        viewBox="0 0 24 24"
                        width="24"
                        height="24"
                        aria-hidden="true"
                        class="transition-colors group-hover:text-[color:var(--accent)]"
                    >
                        <path
                            fill="currentColor"
                            d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452z"
                        ></path>
                    </svg>
                </a>
                <a
                    href="https://github.com/davidringram"
                    target="_blank"
                    class="group text-[color:var(--color-text-secondary)]"
                >
                    <span class="sr-only">Go to GitHub</span>
                    <svg
                        viewBox="0 0 16 16"
                        aria-hidden="true"
                        width="24"
                        height="24"
                        class="transition-colors group-hover:text-[color:var(--accent)]"
                        ><path
                            fill="currentColor"
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
                        ></path></svg
                    >
                </a>
                <a
                    href="https://www.salesforce.com/trailblazer/davidingram"
                    target="_blank"
                    class="group text-[color:var(--color-text-secondary)]"
                >
                    <span class="sr-only">Go to Salesforce</span>
                    <svg
                        viewBox="0 0 32 32"
                        width="24"
                        height="24"
                        aria-hidden="true"
                        class="transition-colors group-hover:text-[color:var(--accent)]"
                    >
                        <path
                            fill="currentColor"
                            d="M13.339 7.219c1-1.057 2.464-1.74 4.063-1.74 2.078 0 3.938 1.203 4.917 2.943 0.844-0.401 1.802-0.604 2.802-0.604 3.802 0 6.88 3.12 6.88 6.964 0 3.839-3.083 6.958-6.901 6.958-0.458 0-0.917-0.057-1.359-0.141-0.859 1.563-2.5 2.604-4.401 2.604-0.802 0-1.542-0.203-2.198-0.5-0.88 2.057-2.922 3.495-5.302 3.495-2.479 0-4.599-1.557-5.401-3.755-0.359 0.078-0.719 0.099-1.099 0.099-2.938 0-5.339-2.401-5.339-5.401 0-2 1.078-3.74 2.677-4.677-0.339-0.76-0.521-1.604-0.521-2.464 0-3.438 2.802-6.198 6.203-6.198 2.042 0 3.797 0.938 4.958 2.401z"
                        ></path>
                    </svg>
                </a>
                <a
                    href="https://www.behance.net/davidingram"
                    target="_blank"
                    class="group text-[color:var(--color-text-secondary)] translate-y-1"
                >
                    <span class="sr-only">Go to Behance</span>
                    <svg
                        viewBox="0 0 32 32"
                        width="28"
                        height="28"
                        aria-hidden="true"
                        class="transition-colors group-hover:text-[color:var(--accent)]"
                    >
                        <path
                            fill="currentColor"
                            d="M22 7h-7v-2h7v2zm1.726 10c-.442 1.297-2.029 3-5.101 3-3.074 0-5.564-1.729-5.564-5.675 0-3.91 2.325-5.92 5.466-5.92 3.082 0 4.964 1.782 5.375 4.426.078.506.109 1.188.095 2.14h-8.027c.13 3.211 3.483 3.312 4.588 2.029h3.168zm-7.686-4h4.965c-.105-1.547-1.136-2.219-2.477-2.219-1.466 0-2.277.768-2.488 2.219zm-9.574 6.988h-6.466v-14.967h6.953c5.476.081 5.58 5.444 2.72 6.906 3.461 1.26 3.577 8.061-3.207 8.061zm-3.466-8.988h3.584c2.508 0 2.906-3-.312-3h-3.272v3zm3.391 3h-3.391v3.016h3.341c3.055 0 2.868-3.016.05-3.016z"
                        ></path>
                    </svg>
                </a>
            </div>
            <ThemeToggle />
            <button
                type="button"
                aria-label="Open menu"
                aria-controls="mobile-menu"
                aria-expanded="false"
                data-menu-btn
                class="md:hidden inline-flex items-center justify-center w-10 h-10 rounded-lg text-[color:var(--color-text-secondary)] hover:text-white"
            >
                <svg
                    viewBox="0 0 24 24"
                    width="24"
                    height="24"
                    aria-hidden="true"
                    ><path
                        fill="currentColor"
                        d="M3 6h18v2H3V6Zm0 5h18v2H3v-2Zm0 5h18v2H3v-2Z"
                    ></path></svg
                >
            </button>
        </div>
    </nav>
    <div id="mobile-menu" class="md:hidden hidden border-t">
        <div class="mx-auto max-w-6xl px-4 py-3 flex flex-col gap-2">
            <div class="flex flex-col">
                <HeaderLink href="/" class="px-2 py-3">Resume</HeaderLink>
                <HeaderLink href="/projects" class="px-2 py-3"
                    >Projects</HeaderLink
                >
                <HeaderLink href="/about" class="px-2 py-3">About</HeaderLink>
                <HeaderLink href="/blog" class="px-2 py-3">Blog</HeaderLink>
                <a href="#contact" class="px-2 py-3">Contact</a>
            </div>
            <div class="flex items-center gap-4 pt-2">
                <a
                    href="https://x.com/guihubie"
                    target="_blank"
                    class="group inline-flex items-center text-[color:var(--color-text-secondary)]"
                >
                    <svg
                        viewBox="0 0 24 24"
                        width="22"
                        height="22"
                        aria-hidden="true"
                        class="transition-colors group-hover:text-white"
                        ><path
                            fill="currentColor"
                            d="M18.146 3H21l-7.5 8.574L22.5 21h-6.297l-4.93-5.597L5.5 21H3l8.106-9.266L3 3h6.453l4.466 5.07L18.146 3Zm-1.103 16.2h1.705L7.05 4.64H5.272l11.771 14.56Z"
                        ></path></svg
                    >
                </a>
                <a
                    href="https://github.com/guihubie/free-astro-template"
                    target="_blank"
                    class="group inline-flex items-center text-[color:var(--color-text-secondary)]"
                >
                    <svg
                        viewBox="0 0 16 16"
                        aria-hidden="true"
                        width="22"
                        height="22"
                        class="transition-colors group-hover:text-white"
                        ><path
                            fill="currentColor"
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
                        ></path></svg
                    >
                </a>
            </div>
        </div>
    </div>
</header>

<script is:inline>
    const btn = document.querySelector("[data-menu-btn]");
    const panel = document.getElementById("mobile-menu");
    function toggleMenu() {
        if (!panel || !btn) return;
        const isOpen = !panel.classList.contains("hidden");
        if (isOpen) {
            panel.classList.add("hidden");
            btn.setAttribute("aria-expanded", "false");
        } else {
            panel.classList.remove("hidden");
            btn.setAttribute("aria-expanded", "true");
        }
    }
    btn?.addEventListener("click", toggleMenu);
    document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
            if (!panel?.classList.contains("hidden")) toggleMenu();
        }
    });
    document.addEventListener("click", (e) => {
        if (!panel || !btn) return;
        const target = e.target;
        const clickedInside = panel.contains(target) || btn.contains(target);
        if (!clickedInside && !panel.classList.contains("hidden")) toggleMenu();
    });
</script>
